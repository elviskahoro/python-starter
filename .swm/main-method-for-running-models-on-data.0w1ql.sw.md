---
id: 0w1ql
name: Main method for running models on data
file_version: 1.0.2
app_version: 0.7.3-1
file_blobs:
  src/sample_main_models.py: be718ca23506a26b181c936d4423c690c4cdb404
---

This section of the code initializes where we'll log errors and output to.

<br/>

Initialize logging
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ src/sample_main_models.py
```python
â¬œ 12     
â¬œ 13     
â¬œ 14     def main():
ðŸŸ© 15         set_error_folder(settings.error_directory)
ðŸŸ© 16         set_error_file_origin(os.path.basename(__file__).rstrip(".py"))
ðŸŸ© 17         set_error_task_origin("main")
â¬œ 18     
â¬œ 19         data_directory: str = settings.data_directory
â¬œ 20     
```

<br/>

Imports the data models to use
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ src/sample_main_models.py
```python
â¬œ 31                 markdown_header = ""
â¬œ 32     
â¬œ 33             markdown: List[str] = [markdown_header]
ðŸŸ© 34             for model_name in task_data.models:
ðŸŸ© 35                 model = task_data.get(model_name)
ðŸŸ© 36                 model_module_name: str = model.model_module_name
ðŸŸ© 37                 module = importlib.import_module(model_module_name)
â¬œ 38     
â¬œ 39                 model_filter_conditions: list[str] = model.get(DATA_FILTER_CONDITIONS)
â¬œ 40                 data_filename: str = import_single_file(
```

<br/>

Loads in data files based on the settings.toml and then feeds them into our models.
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ src/sample_main_models.py
```python
â¬œ 36                 model_module_name: str = model.model_module_name
â¬œ 37                 module = importlib.import_module(model_module_name)
â¬œ 38     
ðŸŸ© 39                 model_filter_conditions: list[str] = model.get(DATA_FILTER_CONDITIONS)
ðŸŸ© 40                 data_filename: str = import_single_file(
ðŸŸ© 41                     folder=data_directory,
ðŸŸ© 42                     list_filename_filter_conditions=tuple(model_filter_conditions),
ðŸŸ© 43                 )
ðŸŸ© 44                 model = module.Model.parse_file(
ðŸŸ© 45                     os.path.join(
ðŸŸ© 46                         data_directory,
ðŸŸ© 47                         data_filename,
ðŸŸ© 48                     )
ðŸŸ© 49                 )
ðŸŸ© 50                 model_markdown = model.as_markdown()
ðŸŸ© 51                 del model
ðŸŸ© 52                 markdown.extend(model_markdown)
â¬œ 53     
â¬œ 54             output_folder: str = task_data.get(MODEL_OUTPUT_DIRECTORY)
â¬œ 55             generate_sub_paths_for_folder(output_folder)
```

<br/>

Outputs the data after it's been parsed and transformed for presentation
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ src/sample_main_models.py
```python
â¬œ 51                 del model
â¬œ 52                 markdown.extend(model_markdown)
â¬œ 53     
ðŸŸ© 54             output_folder: str = task_data.get(MODEL_OUTPUT_DIRECTORY)
ðŸŸ© 55             generate_sub_paths_for_folder(output_folder)
ðŸŸ© 56     
ðŸŸ© 57             output_filename = generate_filename(
ðŸŸ© 58                 nt_filename=(task_data.get(MODEL_OUTPUT_FILENAME)),
ðŸŸ© 59                 folder=output_folder,
ðŸŸ© 60             )
ðŸŸ© 61             with open(output_filename, "w") as f:
ðŸŸ© 62                 f.writelines(markdown)
â¬œ 63     
â¬œ 64     
â¬œ 65     if __name__ == "__main__":
```

<br/>

This file was generated by Swimm. [Click here to view it in the app](https://app.swimm.io/repos/Z2l0aHViJTNBJTNBcHl0aG9uX3N0YXJ0ZXIlM0ElM0FlbHZpc2thaG9ybw==/docs/0w1ql).